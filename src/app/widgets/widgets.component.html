

<section class="widget-form">

    <mat-card>

        <mat-card-title>New Widget</mat-card-title>

        <form [formGroup]="widgetForm" novalidate *ngIf="showForm">

            <mat-card-content>

                <mat-form-field>
                    <input matInput placeholder="Name" formControlName="name">
                    <mat-error *ngIf="nameFc.touched && nameFc.hasError('required')">Required</mat-error>
                    <mat-error *ngIf="nameFc.touched && nameFc.hasError('maxlength')">
                        Too long. Required: {{nameFc.getError('maxlength').requiredLength}} actual: {{nameFc.getError('maxlength').actualLength}} 
                    </mat-error>
                </mat-form-field>

                <mat-form-field>
                    <input matInput type="number" placeholder="Price" formControlName="price">
                    <mat-error *ngIf="priceFc.touched && priceFc.hasError('required')">Required</mat-error>
                    <mat-error *ngIf="priceFc.touched && priceFc.hasError('min')">
                        Too small. Must not be less than: {{priceFc.getError('min').min}}
                    </mat-error>
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Color</mat-label>
                    <mat-select formControlName="color">
                        <mat-option value="BLUE">Blue</mat-option>
                        <mat-option value="RED">Red</mat-option>
                        <mat-option value="GREEN">Green</mat-option>
                    </mat-select>
                    <mat-error *ngIf="colorFc.touched && colorFc.hasError('required')">Required</mat-error>
                </mat-form-field>


                <div>
                    <mat-form-field style="width: 100%">
                        <textarea matInput placeholder="Description" formControlName="description"></textarea>
                    </mat-form-field>
                </div>
                

            </mat-card-content>


            <mat-card-actions>
                <button mat-raised-button color="primary" (click)="addWidget()" [disabled]="!widgetForm.valid">ADD</button>
                <button mat-raised-button (click)="resetForm()">RESET</button>
            </mat-card-actions>

        </form>


    </mat-card>




</section>


<!-- <section class="widget-form">

    <form [formGroup]="widgetForm" novalidate>

        <div class="form-fields">

            <div class="form-field">
                <label for="name">Name</label>
                <input type="text" id="name" formControlName="name">
                <div class="form-error" *ngIf="widgetForm.get('name')?.touched && widgetForm.get('name')?.errors as errors">
                    <div *ngIf="errors['required']">Requied</div>
                    <div *ngIf="errors['maxlength']">
                        Too long. Required: {{errors['maxlength'].requiredLength}} actual: {{errors['maxlength'].actualLength}}
                    </div>
                </div>
            </div>


            <div class="form-field">
                <div>
                    <label for="description">Description</label>
                </div> 
                <textarea id="description" formControlName="description" cols="30" rows="10"></textarea>
            </div>


            <div class="form-field">
                <label for="price">Price</label>
                <input type="number" id="price" formControlName="price">
                <div class="form-error" *ngIf="widgetForm.get('price')?.touched && widgetForm.get('price')?.errors as errors">
                    <div *ngIf="errors['required']">Requied</div>
                    <div *ngIf="errors['min']">
                        Too small. Must not be less than: {{errors['min'].min}}
                    </div>
                </div>
            </div>


            <div class="form-field">
                <label for="color">Color</label>
                <select id="color" formControlName="color">
                    <option value="">Select color</option>
                    <option value="BLUE">Blue</option>
                    <option value="RED">Red</option>
                    <option value="GREEN">Green</option>
                </select>
                <div class="form-error" *ngIf="widgetForm.get('color')?.touched && widgetForm.get('color')?.errors as errors">
                    <div *ngIf="errors['required']">Requied</div>
                </div>
            </div>

        </div>

    </form>

    <div class="actions">
        <button (click)="addWidget()" [disabled]="!widgetForm.valid">ADD</button>
        <button (click)="widgetForm.reset()">RESET</button>
    </div>

</section> -->


<section>

    <div>Name errors: {{widgetForm.get('name')?.errors | json}}</div>

    <div>Name FormControl dirty: {{widgetForm.get('name')?.dirty}}</div>

    <div>Price errors: {{widgetForm.get('price')?.errors | json}}</div>

    <div>widgetForm.value: {{widgetForm.value | json}}</div>

    <div>All Widgets: {{widgets$ | async | json}}</div>

    <div>selectWidgetEntities$: {{selectWidgetEntities$ | async | json}}</div>
    <div>selectWidgetsAll$: {{selectWidgetsAll$ | async | json}}</div>


</section>